<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Arslaner Download Express</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background-color: #111; color: white; }
    input, button, select { margin-top: 10px; padding: 10px; width: 100%; border-radius: 5px; border: none; }
    button { background-color: #00aa00; color: white; font-weight: bold; }
  </style>
</head>
<body>
  <h2>📥 Arslaner Download Express</h2>
  <input type="text" id="url" placeholder="İndirme linkini buraya gir" />
  <input type="text" id="filename" placeholder="Dosya adını yaz (örnek.zip)" />
  <button onclick="startDownload()">İndir</button>

  <hr />
  <h3>📺 YouTube Video İndir</h3>
  <input type="text" id="yturl" placeholder="YouTube linkini veya başlık yaz" />
  <input type="text" id="ytfilename" placeholder="Dosya adı (örnek.mp4)" />
  <select id="format">
    <option value="bestvideo[height<=1080]+bestaudio/best[height<=1080]">1080p MP4 (video + ses)</option>
    <option value="bestaudio">Sadece Ses (MP3)</option>
    <option value="best">Otomatik En İyi Kalite</option>
  </select>
  <button onclick="downloadYT()">YouTube'dan İndir</button>

  <progress id="progressBar" value="0" max="100" style="width: 100%; height: 20px; margin-top: 20px;"></progress>
  <p id="status"></p>

  <script>
    const { ipcRenderer } = require('electron');

    function startDownload() {
      const url = document.getElementById('url').value;
      const filename = document.getElementById('filename').value;
      if (!url.startsWith("http")) {
        document.getElementById('status').innerText = "❌ Hatalı link! Lütfen geçerli bir link gir.";
        return;
      }
      document.getElementById('status').innerText = "İndirme başladı...";
      document.getElementById('progressBar').value = 0;
      ipcRenderer.send('start-download', url, filename);
    }

    function downloadYT() {
      const yturl = document.getElementById('yturl').value;
      const searchURL = yturl.startsWith("http") ? yturl : `ytsearch:${yturl}`;
      const filename = document.getElementById('ytfilename').value;
      const format = document.getElementById('format').value;

      document.getElementById('status').innerText = "YouTube indirme başladı...";
      document.getElementById('progressBar').value = 0;

      ipcRenderer.send('start-ytdlp', searchURL, filename, format);
    }

    ipcRenderer.on('download-progress', (event, percent) => {
      document.getElementById('progressBar').value = percent;
      document.getElementById('status').innerText = `${percent}% indirildi...`;
    });

    ipcRenderer.on('download-complete', (event, file) => {
      document.getElementById('status').innerText = `✅ ${file} indirildi!`;
      document.getElementById('progressBar').value = 100;
    });

    ipcRenderer.on('download-error', (event, message) => {
      document.getElementById('status').innerText = `❌ Hata: ${message}`;
    });
  </script>
</body>
</html>
